{"uid":"ba7954ccfbc6781e","name":"test_未認証でTodoページにアクセスするとログインに飛ぶ","fullName":"tests.agentitest.test_sample_app.TestAuth#test_未認証でTodoページにアクセスするとログインに飛ぶ","historyId":"7ba149613216782ce57bb35c33abb11f","time":{"start":1772114344004,"stop":1772114349126,"duration":5122},"description":"未認証で /todo にアクセスすると /login にリダイレクトされる","descriptionHtml":"<p>未認証で /todo にアクセスすると /login にリダイレクトされる</p>\n","status":"failed","statusMessage":"AssertionError: Agent did not return a result.\nassert ('' is not None and '' != '')\n +  where '' = <built-in method strip of str object at 0x14f83a8>()\n +    where <built-in method strip of str object at 0x14f83a8> = ''.strip","statusTrace":"self = <tests.agentitest.test_sample_app.TestAuth object at 0x7f906e492c10>\nllm = ChatGoogle(model='gemini-2.5-flash-lite', temperature=0.2, top_p=None, seed=None, thinking_budget=0, max_output_tokens...ls=None, project=None, location=None, http_options=None, _client=<google.genai.client.Client object at 0x7f9066864690>)\nbrowser_session = BrowserSession\uD83C\uDD51 a526 \uD83C\uDD63 1D (cdp_url=ws://localhost:33265/devtools/browser/01f4c5aa-61b1-465d-8ede-d0d7385629a0, profile=BrowserProfile)\n\n    @allure.story(\"未認証ユーザーがログインページにリダイレクトされる\")\n    async def test_未認証でTodoページにアクセスするとログインに飛ぶ(\n        self, llm: ChatGoogle, browser_session: BrowserSession\n    ):\n        \"\"\"未認証で /todo にアクセスすると /login にリダイレクトされる\"\"\"\n>       await self.run_task(\n            llm,\n            browser_session,\n            \"click the 'Todo' link in the navigation. \"\n            \"You should be redirected to a login page. \"\n            \"Confirm that a 'Sign In' heading is visible and the URL contains '/login'. \"\n            \"Return 'redirected_to_login' if both are true.\",\n            \"redirected_to_login\",\n        )\n\ntests/agentitest/test_sample_app.py:63: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <tests.agentitest.test_sample_app.TestAuth object at 0x7f906e492c10>\nllm = ChatGoogle(model='gemini-2.5-flash-lite', temperature=0.2, top_p=None, seed=None, thinking_budget=0, max_output_tokens...ls=None, project=None, location=None, http_options=None, _client=<google.genai.client.Client object at 0x7f9066864690>)\nbrowser_session = BrowserSession\uD83C\uDD51 a526 \uD83C\uDD63 1D (cdp_url=ws://localhost:33265/devtools/browser/01f4c5aa-61b1-465d-8ede-d0d7385629a0, profile=BrowserProfile)\ntask_instruction = \"click the 'Todo' link in the navigation. You should be redirected to a login page. Confirm that a 'Sign In' heading is visible and the URL contains '/login'. Return 'redirected_to_login' if both are true.\"\nexpected_substring = 'redirected_to_login', ignore_case = True\n\n    async def run_task(\n        self,\n        llm: ChatGoogle,\n        browser_session: BrowserSession,\n        task_instruction: str,\n        expected_substring: str,\n        ignore_case: bool = True,\n    ) -> str:\n        \"\"\"エージェントにタスクを実行させ、結果を検証する\"\"\"\n        full_task: str = f\"Go to {BASE_URL}, then {task_instruction}\"\n        result_text: str = await _run_agent_task(full_task, llm, browser_session)\n>       assert result_text is not None and result_text.strip() != \"\", (\n            \"Agent did not return a result.\"\n        )\nE       AssertionError: Agent did not return a result.\nE       assert ('' is not None and '' != '')\nE        +  where '' = <built-in method strip of str object at 0x14f83a8>()\nE        +    where <built-in method strip of str object at 0x14f83a8> = ''.strip\n\ntests/agentitest/conftest.py:180: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1772114303206,"stop":1772114303206,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1772114303206,"stop":1772114303207,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop_policy","time":{"start":1772114303206,"stop":1772114303206,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1772114303207,"stop":1772114303207,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1772114303207,"stop":1772114303207,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_profile","time":{"start":1772114303207,"stop":1772114303208,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_version_info","time":{"start":1772114303208,"stop":1772114304712,"duration":1504},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"allure_environment","time":{"start":1772114304712,"stop":1772114304712,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"cleanup_test_data","time":{"start":1772114343676,"stop":1772114343676,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"llm","time":{"start":1772114343676,"stop":1772114343676,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1772114343676,"stop":1772114343676,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_session","time":{"start":1772114343677,"stop":1772114344004,"duration":327},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"未認証で /todo にアクセスすると /login にリダイレクトされる","status":"failed","statusMessage":"AssertionError: Agent did not return a result.\nassert ('' is not None and '' != '')\n +  where '' = <built-in method strip of str object at 0x14f83a8>()\n +    where <built-in method strip of str object at 0x14f83a8> = ''.strip","statusTrace":"self = <tests.agentitest.test_sample_app.TestAuth object at 0x7f906e492c10>\nllm = ChatGoogle(model='gemini-2.5-flash-lite', temperature=0.2, top_p=None, seed=None, thinking_budget=0, max_output_tokens...ls=None, project=None, location=None, http_options=None, _client=<google.genai.client.Client object at 0x7f9066864690>)\nbrowser_session = BrowserSession\uD83C\uDD51 a526 \uD83C\uDD63 1D (cdp_url=ws://localhost:33265/devtools/browser/01f4c5aa-61b1-465d-8ede-d0d7385629a0, profile=BrowserProfile)\n\n    @allure.story(\"未認証ユーザーがログインページにリダイレクトされる\")\n    async def test_未認証でTodoページにアクセスするとログインに飛ぶ(\n        self, llm: ChatGoogle, browser_session: BrowserSession\n    ):\n        \"\"\"未認証で /todo にアクセスすると /login にリダイレクトされる\"\"\"\n>       await self.run_task(\n            llm,\n            browser_session,\n            \"click the 'Todo' link in the navigation. \"\n            \"You should be redirected to a login page. \"\n            \"Confirm that a 'Sign In' heading is visible and the URL contains '/login'. \"\n            \"Return 'redirected_to_login' if both are true.\",\n            \"redirected_to_login\",\n        )\n\ntests/agentitest/test_sample_app.py:63: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <tests.agentitest.test_sample_app.TestAuth object at 0x7f906e492c10>\nllm = ChatGoogle(model='gemini-2.5-flash-lite', temperature=0.2, top_p=None, seed=None, thinking_budget=0, max_output_tokens...ls=None, project=None, location=None, http_options=None, _client=<google.genai.client.Client object at 0x7f9066864690>)\nbrowser_session = BrowserSession\uD83C\uDD51 a526 \uD83C\uDD63 1D (cdp_url=ws://localhost:33265/devtools/browser/01f4c5aa-61b1-465d-8ede-d0d7385629a0, profile=BrowserProfile)\ntask_instruction = \"click the 'Todo' link in the navigation. You should be redirected to a login page. Confirm that a 'Sign In' heading is visible and the URL contains '/login'. Return 'redirected_to_login' if both are true.\"\nexpected_substring = 'redirected_to_login', ignore_case = True\n\n    async def run_task(\n        self,\n        llm: ChatGoogle,\n        browser_session: BrowserSession,\n        task_instruction: str,\n        expected_substring: str,\n        ignore_case: bool = True,\n    ) -> str:\n        \"\"\"エージェントにタスクを実行させ、結果を検証する\"\"\"\n        full_task: str = f\"Go to {BASE_URL}, then {task_instruction}\"\n        result_text: str = await _run_agent_task(full_task, llm, browser_session)\n>       assert result_text is not None and result_text.strip() != \"\", (\n            \"Agent did not return a result.\"\n        )\nE       AssertionError: Agent did not return a result.\nE       assert ('' is not None and '' != '')\nE        +  where '' = <built-in method strip of str object at 0x14f83a8>()\nE        +    where <built-in method strip of str object at 0x14f83a8> = ''.strip\n\ntests/agentitest/conftest.py:180: AssertionError","steps":[{"name":"Action: navigate(url=https://d214my39l3yw2c.cloudfront.net, new_tab=False)","time":{"start":1772114345719,"stop":1772114345777,"duration":58},"status":"passed","steps":[],"attachments":[{"uid":"32115a5971bd1bdf","name":"Agent Thoughts","source":"32115a5971bd1bdf.txt","type":"text/plain","size":142},{"uid":"7f4aa6c14ed8c81a","name":"URL","source":"7f4aa6c14ed8c81a.txt","type":"text/plain","size":38},{"uid":"134b31688c28cfca","name":"Step Duration","source":"134b31688c28cfca.txt","type":"text/plain","size":5},{"uid":"441f9856e40f783c","name":"Screenshot","source":"441f9856e40f783c.png","type":"image/png","size":39189}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},{"name":"Action: navigate(url=https://d214my39l3yw2c.cloudfront.net, new_tab=False)","time":{"start":1772114346806,"stop":1772114346860,"duration":54},"status":"passed","steps":[],"attachments":[{"uid":"f36d9f850f8404f2","name":"Agent Thoughts","source":"f36d9f850f8404f2.txt","type":"text/plain","size":142},{"uid":"f56136c209f1ac1e","name":"URL","source":"f56136c209f1ac1e.txt","type":"text/plain","size":38},{"uid":"b886d2d81838ff13","name":"Step Duration","source":"b886d2d81838ff13.txt","type":"text/plain","size":5},{"uid":"fa151b04d140c6c6","name":"Screenshot","source":"fa151b04d140c6c6.png","type":"image/png","size":39189}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},{"name":"Action: navigate(url=https://d214my39l3yw2c.cloudfront.net, new_tab=False)","time":{"start":1772114347886,"stop":1772114347944,"duration":58},"status":"passed","steps":[],"attachments":[{"uid":"ab6154f1edb95983","name":"Agent Thoughts","source":"ab6154f1edb95983.txt","type":"text/plain","size":142},{"uid":"4f0b8f563b4c4d64","name":"URL","source":"4f0b8f563b4c4d64.txt","type":"text/plain","size":38},{"uid":"603bf7f78d06f964","name":"Step Duration","source":"603bf7f78d06f964.txt","type":"text/plain","size":5},{"uid":"84d5af892845dd07","name":"Screenshot","source":"84d5af892845dd07.png","type":"image/png","size":39189}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},{"name":"Action: navigate(url=https://d214my39l3yw2c.cloudfront.net, new_tab=False)","time":{"start":1772114348940,"stop":1772114348994,"duration":54},"status":"passed","steps":[],"attachments":[{"uid":"f58381b6e49fe6d4","name":"Agent Thoughts","source":"f58381b6e49fe6d4.txt","type":"text/plain","size":142},{"uid":"15310b911c97cb3","name":"URL","source":"15310b911c97cb3.txt","type":"text/plain","size":38},{"uid":"aee9cf89e3fdc4a7","name":"Step Duration","source":"aee9cf89e3fdc4a7.txt","type":"text/plain","size":5},{"uid":"70b3a9fe384469f3","name":"Screenshot","source":"70b3a9fe384469f3.png","type":"image/png","size":39189}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":4,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"51b6c5e9539fda21","name":"log","source":"51b6c5e9539fda21.txt","type":"text/plain","size":413}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":4,"attachmentsCount":17,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"browser_session::finalizer","time":{"start":1772114349132,"stop":1772114349242,"duration":110},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1772114349243,"stop":1772114349243,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"cleanup_test_data::0","time":{"start":1772114349244,"stop":1772114349665,"duration":421},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"story","value":"未認証ユーザーがログインページにリダイレクトされる"},{"name":"feature","value":"認証"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.agentitest"},{"name":"suite","value":"test_sample_app"},{"name":"subSuite","value":"TestAuth"},{"name":"host","value":"runnervmnay03"},{"name":"thread","value":"3160-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.agentitest.test_sample_app"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":["asyncio"]},"source":"ba7954ccfbc6781e.json","parameterValues":[]}